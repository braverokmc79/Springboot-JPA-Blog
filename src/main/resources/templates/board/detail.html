<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout=http://www.ultraq.net.nz/thymeleaf/layout
      layout:decorate="~{layouts/layout1}"      
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<div layout:fragment="content">


    <div class="container">
				<button type="button"  class="btn btn-secondary"  onclick="history.back()">돌아가기</button>
			
		<!-- 	     인증시 사용된 객체에 대한 정보
		        <b>Authenticated DTO:</b>
		        <div sec:authentication="principal"></div>
		
		        인증시 사용된 객체의 Username (ID)
		        <b>Authenticated username:</b>
		        <div sec:authentication="name"></div>
		
		        객체의 권한te
		        <b>Authenticated user role:</b>
		        <div sec:authentication="principal.authorities"></div>
		         -->

			<th:block  th:if="${board.user.username ==auth.principal.Username}">
				<a th:href="@{'/board/'+${board.id}+'/updateForm'}"	class="btn btn-warning">수정</a>
				<button id="btn-delete"	class="btn btn-danger">삭제</button>
			</th:block>	
				<br><br>
	
			<div class="mb-5">
			글번호 : <span id="id" class="mr-5"><i>[[${board.id}]]</i></span>
			작성자 : <span><i>[[${board.user.username}]]</i></span>
			</div>
		
     	
			<div class="form-group mb-5">
		 		[[${board.title}]]			
			</div>
	
			<hr>
			<div class="form-group">		 		
		 		<th:block  th:utext="${board.content}"></th:block>					
			</div>
			<hr>
		
		
		
		
		<div class="card">
				<div class="card-body">
					<textarea class="form-control" rows="1" cols=""></textarea>
				</div>		
				<div class="card-footer text-center">
					<button class="btn btn-primary">등록</button>
				</div>	
		</div>		
		
		
		
		
		<div class="card mt-5">
			<div class="card-header">댓글 리스트  ${board.replys.size() }</div>
			<ul id="reply--box" class="list-group">
			
		<th:block   th:each ="reply, status : ${board.replys}"  >
			  <li id="reply--1"   class="list-group-item d-flex justify-content-between">
			  	<div>[[${reply.content}]]</div>
			  	<div class="d-flex ">
			  		<div>작성자 : [[${reply.user.username}]]</div>
			  		<div class="ml-3"><button class="btn btn-danger btn-sm">삭제</button></div>				  		
			  	</div>			  
			  </li>
		</th:block>
		
			</ul>
		</div>

		
		
    </div>


</div>


<th:block layout:fragment="script">
<script th:src="@{/js/board.js}"></script>
    <script>
      $('.summernote').summernote({
        placeholder: '내용을 입력해 주세요.',
        tabsize: 3,
        height: 300,
      });
    </script>

</th:block>

</html>